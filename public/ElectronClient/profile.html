<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HoN OpenSource</title>
    <link rel="stylesheet" type="text/css" href="./styles/style.css">
</head>

<body>
    <div class="wrapper">
        <div class="drag">
            <button class="close_button" onclick="window.close()">x</button>
        </div>
        <video autoplay muted loop id="background">
            <source src="./public_docs/profile.webm" type="video/webm">
        </video>
        <div class="internal">
            <div class="content">
                <div id="welcome"></div>
                <button class="play_button" type="button" onclick="loadGame(this)">
                    <img src="./public_docs/play_button.png" alt="Play" />
                </button>
            </div>
        </div>
    </div>
    <div class="cursors">
        <img src="./images/cursor.png" alt="pointer" id="pointer" />
        <img src="./images/click.png" alt="clicker" id="clicker" />
    </div>
</body>
<script src="./scripts/axios.min.js"></script>
<script src="./scripts/cursor.js"></script>
<script>
    function loadData() {
        let user = sessionStorage.getItem("user");
        user = JSON.parse(user);
        const username = user.username[0].toUpperCase() + user.username.slice(1);
        document.getElementById("welcome").innerHTML = `Logged in as <b>${username}</b>`;
    }

    loadData();

    function loadGame(btn) {
        btn.style.display = "none";
        const userData = JSON.parse(sessionStorage.getItem("user"));
        window.indexBridge.openHonClient(userData);
    }

    function submitLocalGames() {
        window.indexBridge.submitGameLogs();
        setInterval(() => {
            window.indexBridge.submitGameLogs();
        }, 10000)
    }

    submitLocalGames();

</script>

</html>